{% extends 'layout.html' %}
{% block content %}
<div class="index-container">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <p class="hero-kicker">Gestion de la Bibliotheque de Plateau</p>
      <h2 class="hero-title">Un point unique pour usagers et administration</h2>
      <p class="hero-subtitle">Inscription, validation, emprunts, reservations et suivi en temps reel.</p>
      <div class="hero-ctas">
        <a href="{{ url_for('user_register') }}" class="hero-btn primary">Demande d inscription</a>
        <a href="{{ url_for('user_portal') }}" class="hero-btn secondary">Espace usager</a>
        <a href="/admin" class="hero-btn secondary">Tableau admin</a>
      </div>
    </div>
  </section>

  <!-- Stats Cards -->
  <section class="stats-cards">
    <div class="stat-item">
      <div class="stat-icon">ğŸ“–</div>
      <div class="stat-body">
        <div class="stat-value" id="stat-books">{{ total_books }}</div>
        <div class="stat-name">Ouvrages</div>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">ğŸ‘¥</div>
      <div class="stat-body">
        <div class="stat-value" id="stat-users">{{ total_users }}</div>
        <div class="stat-name">AdhÃ©rents</div>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">ğŸ”„</div>
      <div class="stat-body">
        <div class="stat-value" id="stat-loans">{{ active_loans }}</div>
        <div class="stat-name">Emprunts actifs</div>
      </div>
    </div>
  </section>

  <!-- Quick Actions -->
  <section class="quick-actions">
    <h3>âš¡ ACTIONS RAPIDES</h3>
    <div class="actions-grid">
      <a href="/books" class="action-btn">
        <span class="action-icon">ğŸ“‹</span>
        <span class="action-text">Lister les ouvrages</span>
      </a>
      <a href="{{ url_for('user_register') }}" class="action-btn">
        <span class="action-icon">â•</span>
        <span class="action-text">Inscription usager</span>
      </a>
      <a href="{{ url_for('user_portal') }}" class="action-btn">
        <span class="action-icon">ğŸ‘¥</span>
        <span class="action-text">Espace usager</span>
      </a>
      <a href="/admin" class="action-btn">
        <span class="action-icon">ğŸ“Š</span>
        <span class="action-text">Gestion admin</span>
      </a>
    </div>
  </section>

  <!-- User/Admin Journey -->
  <section class="quick-flow">
    <h3>PARCOURS RAPIDE</h3>
    <div class="flow-grid">
      <article class="flow-card">
        <h4>Cote usager</h4>
        <ol>
          <li>Demander une inscription</li>
          <li>Attendre la validation admin</li>
          <li>Se connecter et choisir un livre</li>
          <li>Emprunter ou reserver</li>
        </ol>
      </article>
      <article class="flow-card">
        <h4>Cote administration</h4>
        <ol>
          <li>Valider les inscriptions en attente</li>
          <li>Gerer livres, usagers, emprunts</li>
          <li>Suivre reservations et retours</li>
          <li>Consulter le journal d audit</li>
        </ol>
      </article>
    </div>
  </section>

  <!-- Search Section -->
  <section class="search-section">
    <h3>ğŸ” RECHERCHER UN OUVRAGE</h3>
    <form method="get" action="/search" class="search-form">
      <input type="text" name="q" class="search-input" placeholder="Titre ou auteur..." required>
      <button type="submit" class="search-btn">ğŸ” Rechercher</button>
    </form>
  </section>

  <!-- Recent Books -->
  <section class="recent-books">
    <h3>ğŸ“š OUVRAGES RÃ‰CENTS</h3>
    <div class="books-list" id="books-container">
      {% if books %}
        {% for b in books[:6] %}
        <div class="book-card">
          <div class="book-cover">ğŸ“–</div>
          <div class="book-info">
            <h4><a href="{{ url_for('book_detail', book_id=b.id) }}">{{ b.title }}</a></h4>
            <p class="author">{{ b.author }}</p>
            <p class="availability">
              {% if b.available_copies() > 0 %}
                <span class="badge success">{{ b.available_copies() }} disponible(s)</span>
              {% else %}
                <span class="badge danger">Non disponible</span>
              {% endif %}
            </p>
          </div>
        </div>
        {% endfor %}
      {% endif %}
    </div>
  </section>
</div>

<script src="/static/app.js"></script>
{% endblock %}
